# Claude Code Cluster - å®Œå…¨å°å…¥æ‰‹é †æ›¸

## ğŸš€ æ¦‚è¦

claude-code-clusterã¯ã€GitHubãƒªãƒã‚¸ãƒˆãƒªã§ã®è‡ªå‹•åŒ–ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰é–‹ç™ºã¨ãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹ã‚’å®Ÿç¾ã™ã‚‹åˆ†æ•£ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã§ã™ã€‚ã“ã®ã‚¬ã‚¤ãƒ‰ã§ã¯ã€ãƒ•ãƒ«æ©Ÿèƒ½ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ»ã‚µãƒ¼ãƒã‚·ã‚¹ãƒ†ãƒ ã®å®Œå…¨ãªå°å…¥æ‰‹é †ã‚’èª¬æ˜ã—ã¾ã™ã€‚

## ğŸ“‹ ã‚·ã‚¹ãƒ†ãƒ æ§‹æˆ

### ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£æ¦‚è¦
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    Claude Code Cluster                      â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Agent CC01  â”‚  â”‚ Agent CC02  â”‚  â”‚ Agent CC03  â”‚          â”‚
â”‚  â”‚ (Backend)   â”‚  â”‚ (Database)  â”‚  â”‚ (Frontend)  â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Agent CC04  â”‚  â”‚ Agent CC05  â”‚  â”‚ Manager     â”‚          â”‚
â”‚  â”‚ (DevOps)    â”‚  â”‚ (Security)  â”‚  â”‚ (Opus)      â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â”œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¤
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”‚
â”‚  â”‚ Command     â”‚  â”‚ Monitoring  â”‚  â”‚ GitHub      â”‚          â”‚
â”‚  â”‚ Logger      â”‚  â”‚ System      â”‚  â”‚ Integration â”‚          â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ
- **Agent Sonnet System**: å°‚é–€åŒ–ã•ã‚ŒãŸã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆï¼ˆCC01-CC05ï¼‰
- **Universal Agent Auto-Loop**: è‡ªå‹•ã‚¿ã‚¹ã‚¯å‡¦ç†ã‚·ã‚¹ãƒ†ãƒ 
- **Command Logging System**: åŒ…æ‹¬çš„ãªã‚³ãƒãƒ³ãƒ‰è¨˜éŒ²
- **Monitoring & Metrics**: ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
- **GitHub Integration**: ãƒªãƒã‚¸ãƒˆãƒªé€£æº

## ğŸ“‹ ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶

### æœ€å°ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶
- **OS**: Linux (Ubuntu 20.04+ æ¨å¥¨), macOS 10.15+, Windows 10+ (WSL2)
- **CPU**: 4ã‚³ã‚¢ä»¥ä¸Š
- **ãƒ¡ãƒ¢ãƒª**: 16GBä»¥ä¸Š
- **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: 500GBä»¥ä¸Š
- **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯**: å®‰å®šã—ãŸã‚¤ãƒ³ã‚¿ãƒ¼ãƒãƒƒãƒˆæ¥ç¶š

### æ¨å¥¨ã‚·ã‚¹ãƒ†ãƒ è¦ä»¶
- **CPU**: 8ã‚³ã‚¢ä»¥ä¸Š
- **ãƒ¡ãƒ¢ãƒª**: 32GBä»¥ä¸Š
- **ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸**: 1TB SSD
- **ãƒãƒƒãƒˆãƒ¯ãƒ¼ã‚¯**: ã‚®ã‚¬ãƒ“ãƒƒãƒˆã‚¤ãƒ¼ã‚µãƒãƒƒãƒˆ

### å¿…è¦ãªã‚½ãƒ•ãƒˆã‚¦ã‚§ã‚¢
- **Python**: 3.11ä»¥ä¸Š
- **Node.js**: 20 LTSä»¥ä¸Š
- **Docker**: 20.10ä»¥ä¸Š
- **Git**: 2.30ä»¥ä¸Š
- **GitHub CLI**: 2.0ä»¥ä¸Š

## ğŸ”§ äº‹å‰æº–å‚™

### 1. åŸºæœ¬ç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

#### Ubuntu/Debian
```bash
# ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
sudo apt update && sudo apt upgrade -y

# å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
sudo apt install -y python3.11 python3.11-pip python3.11-venv nodejs npm git curl wget

# GitHub CLI ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
curl -fsSL https://cli.github.com/packages/githubcli-archive-keyring.gpg | sudo dd of=/usr/share/keyrings/githubcli-archive-keyring.gpg
echo "deb [arch=$(dpkg --print-architecture) signed-by=/usr/share/keyrings/githubcli-archive-keyring.gpg] https://cli.github.com/packages stable main" | sudo tee /etc/apt/sources.list.d/github-cli.list > /dev/null
sudo apt update && sudo apt install gh

# Docker ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
curl -fsSL https://get.docker.com -o get-docker.sh
sudo sh get-docker.sh
sudo usermod -aG docker $USER
```

#### macOS
```bash
# Homebrew ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ« (æœªã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ã®å ´åˆ)
/bin/bash -c "$(curl -fsSL https://raw.githubusercontent.com/Homebrew/install/HEAD/install.sh)"

# å¿…è¦ãªãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
brew install python@3.11 node@20 git gh docker
```

### 2. èªè¨¼è¨­å®š

#### GitHub CLIèªè¨¼
```bash
# GitHubèªè¨¼
gh auth login

# èªè¨¼ç¢ºèª
gh auth status
```

#### Claude APIè¨­å®š
```bash
# Claude API ã‚­ãƒ¼ã®è¨­å®š
export CLAUDE_API_KEY="your-claude-api-key"
echo 'export CLAUDE_API_KEY="your-claude-api-key"' >> ~/.bashrc
```

## ğŸš€ å°å…¥æ‰‹é †

### Phase 1: ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³ã¨åŸºæœ¬è¨­å®š

```bash
# 1. ãƒªãƒã‚¸ãƒˆãƒªã®ã‚¯ãƒ­ãƒ¼ãƒ³
git clone https://github.com/ootakazuhiko/claude-code-cluster.git
cd claude-code-cluster

# 2. æ¨©é™è¨­å®š
chmod +x *.sh
chmod +x hooks/*.py
chmod +x scripts/*.sh

# 3. åŸºæœ¬è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
cp .env.example .env
```

### Phase 2: Pythonç’°å¢ƒã®ã‚»ãƒƒãƒˆã‚¢ãƒƒãƒ—

```bash
# 1. Pythonä»®æƒ³ç’°å¢ƒã®ä½œæˆ
python3.11 -m venv venv
source venv/bin/activate

# 2. ä¾å­˜é–¢ä¿‚ã®ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install -r requirements.txt

# 3. ãƒ‘ãƒƒã‚±ãƒ¼ã‚¸ã®ç¢ºèª
pip list
```

### Phase 3: ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¨­å®š

#### Agent Sonnet Systemã®è¨­å®š
```bash
# 1. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¨­å®šã®ç¢ºèª
ls -la agent-config/

# 2. ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆè¨­å®šã®é©ç”¨
source agent-config/sonnet-default.sh

# 3. å„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®è¨­å®šç¢ºèª
./start-agent-sonnet.sh CC01 --dry-run
./start-agent-sonnet.sh CC02 --dry-run
./start-agent-sonnet.sh CC03 --dry-run
```

#### Universal Agent Auto-Loopè¨­å®š
```bash
# 1. è¨­å®šãƒ•ã‚¡ã‚¤ãƒ«ã®ç¢ºèª
cat hooks/claude-code-settings.json

# 2. ãƒ­ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½œæˆ
mkdir -p /tmp/claude-code-logs

# 3. è¨­å®šã®æ¤œè¨¼
python3 hooks/universal-agent-auto-loop-with-logging.py --help
```

### Phase 4: Command Logging Systemã®è¨­å®š

```bash
# 1. ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ ã®åˆæœŸåŒ–
python3 hooks/command_logger.py

# 2. ãƒ­ã‚°ãƒ“ãƒ¥ãƒ¼ã‚¢ãƒ¼ã®ç¢ºèª
python3 hooks/view-command-logs.py --help

# 3. ã‚µãƒ³ãƒ—ãƒ«ãƒ­ã‚°ã®ä½œæˆ
./scripts/quick-test-command-logging.sh
```

### Phase 5: ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã®è¨­å®š

```bash
# 1. ç›£è¦–ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ä½œæˆ
mkdir -p /tmp/agent-metrics

# 2. ç›£è¦–ã‚¹ã‚¯ãƒªãƒ—ãƒˆã®å®Ÿè¡Œæ¨©é™ä»˜ä¸
chmod +x hooks/start-agent-loop.sh

# 3. ç›£è¦–ã‚·ã‚¹ãƒ†ãƒ ã®èµ·å‹•ãƒ†ã‚¹ãƒˆ
./hooks/start-agent-loop.sh status all
```

## ğŸ¯ é‹ç”¨é–‹å§‹

### 1. å˜ä¸€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®èµ·å‹•

#### CC01 (Backend Specialist)ã®èµ·å‹•
```bash
# Sonnetè¨­å®šã§ã®èµ·å‹•
./start-agent-sonnet.sh CC01

# Universal systemã§ã®èµ·å‹•
python3 hooks/universal-agent-auto-loop-with-logging.py CC01 owner repo --max-iterations 10
```

#### CC02 (Database Specialist)ã®èµ·å‹•
```bash
# Sonnetè¨­å®šã§ã®èµ·å‹•
./start-agent-sonnet.sh CC02

# Universal systemã§ã®èµ·å‹•
python3 hooks/universal-agent-auto-loop-with-logging.py CC02 owner repo --specialization "Database Specialist"
```

#### CC03 (Frontend Specialist)ã®èµ·å‹•
```bash
# Sonnetè¨­å®šã§ã®èµ·å‹•
./start-agent-sonnet.sh CC03

# Universal systemã§ã®èµ·å‹•
python3 hooks/universal-agent-auto-loop-with-logging.py CC03 owner repo --labels frontend ui react
```

### 2. ãƒãƒ«ãƒã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚·ã‚¹ãƒ†ãƒ ã®èµ·å‹•

#### å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ä¸€æ‹¬èµ·å‹•
```bash
# ç®¡ç†ã‚¹ã‚¯ãƒªãƒ—ãƒˆã‚’ä½¿ç”¨
./hooks/start-agent-loop.sh start all

# å€‹åˆ¥èµ·å‹•
./hooks/start-agent-loop.sh start CC01 &
./hooks/start-agent-loop.sh start CC02 &
./hooks/start-agent-loop.sh start CC03 &
./hooks/start-agent-loop.sh start CC04 &
./hooks/start-agent-loop.sh start CC05 &
```

### 3. ç›£è¦–ã¨ãƒ­ã‚°ã®ç¢ºèª

#### ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ ç›£è¦–
```bash
# å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®çŠ¶æ³ç¢ºèª
./hooks/start-agent-loop.sh status all

# ãƒ­ã‚°ã®ãƒªã‚¢ãƒ«ã‚¿ã‚¤ãƒ è¡¨ç¤º
python3 hooks/view-command-logs.py --follow

# ç‰¹å®šã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®ç›£è¦–
python3 hooks/view-command-logs.py --agent CC01 --follow
```

#### ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ç›£è¦–
```bash
# ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®è¡¨ç¤º
./hooks/start-agent-loop.sh metrics all

# çµ±è¨ˆæƒ…å ±ã®è¡¨ç¤º
python3 hooks/view-command-logs.py --stats

# ãƒ­ã‚°ã®ã‚¨ã‚¯ã‚¹ãƒãƒ¼ãƒˆ
python3 hooks/view-command-logs.py --export /tmp/system-logs.json
```

## ğŸ”§ è¨­å®šã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

### 1. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆè¨­å®šã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

#### å°‚é–€åŒ–ã®è¨­å®š
```bash
# CC04 (DevOps Specialist)ã®è¨­å®š
python3 hooks/universal-agent-auto-loop-with-logging.py CC04 owner repo \
  --specialization "DevOps Specialist" \
  --labels devops ci-cd deployment \
  --keywords docker kubernetes pipeline \
  --cooldown 120

# CC05 (Security Specialist)ã®è¨­å®š
python3 hooks/universal-agent-auto-loop-with-logging.py CC05 owner repo \
  --specialization "Security Specialist" \
  --labels security audit vulnerability \
  --keywords security auth encryption \
  --cooldown 90
```

### 2. ç›£è¦–è¨­å®šã®ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º

#### claude-code-settings.jsonã®ç·¨é›†
```json
{
  "agent_configurations": {
    "CC01": {
      "specialization": "Backend Specialist",
      "labels": ["claude-code-task", "backend", "cc01"],
      "priority_keywords": ["backend", "api", "database", "python", "fastapi"],
      "max_task_duration": 1800,
      "cooldown_time": 60
    }
  },
  "monitoring": {
    "enabled": true,
    "log_level": "INFO",
    "metrics_collection": true,
    "performance_tracking": true
  }
}
```

## ğŸ› ãƒˆãƒ©ãƒ–ãƒ«ã‚·ãƒ¥ãƒ¼ãƒ†ã‚£ãƒ³ã‚°

### 1. ä¸€èˆ¬çš„ãªå•é¡Œã¨è§£æ±ºç­–

#### ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãŒèµ·å‹•ã—ãªã„å ´åˆ
```bash
# 1. æ¨©é™ç¢ºèª
ls -la *.sh hooks/*.py

# 2. Pythonç’°å¢ƒç¢ºèª
python3 --version
pip list | grep claude

# 3. ä¾å­˜é–¢ä¿‚ã®å†ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«
pip install --force-reinstall -r requirements.txt
```

#### GitHubèªè¨¼ã‚¨ãƒ©ãƒ¼
```bash
# 1. èªè¨¼çŠ¶æ…‹ç¢ºèª
gh auth status

# 2. å†èªè¨¼
gh auth login --force

# 3. æ¨©é™ç¢ºèª
gh api user
```

#### ãƒ­ã‚°ãŒè¨˜éŒ²ã•ã‚Œãªã„å ´åˆ
```bash
# 1. ãƒ­ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®ç¢ºèª
ls -la /tmp/claude-code-logs/

# 2. æ¨©é™è¨­å®š
chmod 755 /tmp/claude-code-logs/
chown -R $USER:$USER /tmp/claude-code-logs/

# 3. ãƒ­ã‚°ã‚·ã‚¹ãƒ†ãƒ ã®å†èµ·å‹•
python3 hooks/command_logger.py
```

### 2. ãƒ‘ãƒ•ã‚©ãƒ¼ãƒãƒ³ã‚¹ã®æœ€é©åŒ–

#### ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®æœ€é©åŒ–
```bash
# 1. ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚½ãƒ¼ã‚¹ã®ç¢ºèª
htop
free -h

# 2. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ•°ã®èª¿æ•´
./hooks/start-agent-loop.sh stop all
./hooks/start-agent-loop.sh start CC01
./hooks/start-agent-loop.sh start CC02
```

#### å®Ÿè¡Œé€Ÿåº¦ã®æœ€é©åŒ–
```bash
# 1. ã‚¯ãƒ¼ãƒ«ãƒ€ã‚¦ãƒ³æ™‚é–“ã®èª¿æ•´
python3 hooks/universal-agent-auto-loop-with-logging.py CC01 owner repo --cooldown 30

# 2. ä¸¦åˆ—å‡¦ç†ã®æœ€é©åŒ–
export PYTHONPATH="/tmp/claude-code-cluster:$PYTHONPATH"
```

## ğŸ“Š é‹ç”¨ç®¡ç†

### 1. æ—¥å¸¸çš„ãªé‹ç”¨ã‚¿ã‚¹ã‚¯

#### ã‚·ã‚¹ãƒ†ãƒ ãƒ˜ãƒ«ã‚¹ãƒã‚§ãƒƒã‚¯
```bash
# 1. å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®çŠ¶æ…‹ç¢ºèª
./hooks/start-agent-loop.sh status all

# 2. ãƒ­ã‚°ã®ç¢ºèª
python3 hooks/view-command-logs.py --stats

# 3. ã‚·ã‚¹ãƒ†ãƒ ãƒªã‚½ãƒ¼ã‚¹ã®ç¢ºèª
df -h
free -h
```

#### å®šæœŸãƒ¡ãƒ³ãƒ†ãƒŠãƒ³ã‚¹
```bash
# 1. ãƒ­ã‚°ã®ãƒ­ãƒ¼ãƒ†ãƒ¼ã‚·ãƒ§ãƒ³
find /tmp/claude-code-logs -name "*.log" -mtime +7 -delete

# 2. ãƒ¡ãƒˆãƒªã‚¯ã‚¹ã®ã‚¯ãƒªãƒ¼ãƒ³ã‚¢ãƒƒãƒ—
sqlite3 /tmp/claude-code-logs/agent-*/command_history.db "DELETE FROM command_history WHERE timestamp < date('now', '-30 days');"

# 3. ã‚·ã‚¹ãƒ†ãƒ ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
git pull origin main
pip install --upgrade -r requirements.txt
```

### 2. ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°

#### æ°´å¹³ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
```bash
# 1. æ–°ã—ã„ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®è¿½åŠ 
python3 hooks/universal-agent-auto-loop-with-logging.py CC06 owner repo \
  --specialization "QA Specialist" \
  --labels qa testing \
  --keywords test quality automation

# 2. è² è·åˆ†æ•£ã®ç¢ºèª
python3 hooks/view-command-logs.py --stats
```

#### å‚ç›´ã‚¹ã‚±ãƒ¼ãƒªãƒ³ã‚°
```bash
# 1. ãƒªã‚½ãƒ¼ã‚¹åˆ¶é™ã®èª¿æ•´
ulimit -n 4096
export PYTHONUNBUFFERED=1

# 2. ä¸¦è¡Œå‡¦ç†æ•°ã®å¢—åŠ 
export AGENT_CONCURRENCY=4
```

## ğŸ”’ ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š

### 1. åŸºæœ¬çš„ãªã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£è¨­å®š

#### API ã‚­ãƒ¼ã®å®‰å…¨ãªç®¡ç†
```bash
# 1. ç’°å¢ƒå¤‰æ•°ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
cat > .env << EOF
CLAUDE_API_KEY=your-api-key-here
GITHUB_TOKEN=your-github-token-here
EOF

# 2. æ¨©é™è¨­å®š
chmod 600 .env

# 3. .gitignoreã¸ã®è¿½åŠ 
echo ".env" >> .gitignore
```

#### ãƒ­ã‚°ã®ã‚»ã‚­ãƒ¥ãƒªãƒ†ã‚£
```bash
# 1. ãƒ­ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®æ¨©é™è¨­å®š
chmod 700 /tmp/claude-code-logs/

# 2. æ©Ÿå¯†æƒ…å ±ã®ãƒ•ã‚£ãƒ«ã‚¿ãƒªãƒ³ã‚°
export LOG_FILTER_PATTERNS="password,token,key,secret"
```

### 2. æœ¬ç•ªç’°å¢ƒã§ã®è¿½åŠ è¨­å®š

#### ãƒ•ã‚¡ã‚¤ã‚¢ã‚¦ã‚©ãƒ¼ãƒ«è¨­å®š
```bash
# 1. UFWã®è¨­å®š (Ubuntu)
sudo ufw enable
sudo ufw allow ssh
sudo ufw allow 8000/tcp  # API server
sudo ufw allow 3000/tcp  # Monitoring dashboard
```

#### SSL/TLSè¨­å®š
```bash
# 1. è¨¼æ˜æ›¸ã®ç”Ÿæˆ
openssl req -x509 -newkey rsa:4096 -keyout key.pem -out cert.pem -days 365 -nodes

# 2. HTTPSè¨­å®š
export HTTPS_CERT_PATH="/path/to/cert.pem"
export HTTPS_KEY_PATH="/path/to/key.pem"
```

## ğŸ“ˆ ç›£è¦–ã¨ã‚¢ãƒ©ãƒ¼ãƒˆ

### 1. åŸºæœ¬çš„ãªç›£è¦–

#### ã‚·ã‚¹ãƒ†ãƒ ãƒ¡ãƒˆãƒªã‚¯ã‚¹
```bash
# 1. CPUä½¿ç”¨ç‡ã®ç›£è¦–
top -p $(pgrep -f "python3.*universal-agent")

# 2. ãƒ¡ãƒ¢ãƒªä½¿ç”¨é‡ã®ç›£è¦–
ps aux | grep python3 | grep universal-agent

# 3. ãƒ‡ã‚£ã‚¹ã‚¯ä½¿ç”¨é‡ã®ç›£è¦–
du -sh /tmp/claude-code-logs/
```

#### ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ãƒ¡ãƒˆãƒªã‚¯ã‚¹
```bash
# 1. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆçµ±è¨ˆã®è¡¨ç¤º
python3 hooks/view-command-logs.py --stats

# 2. æˆåŠŸç‡ã®ç›£è¦–
python3 hooks/view-command-logs.py --agent CC01 --stats | grep "Success"

# 3. å¿œç­”æ™‚é–“ã®ç›£è¦–
python3 hooks/view-command-logs.py --type GH_API --stats
```

### 2. ã‚¢ãƒ©ãƒ¼ãƒˆè¨­å®š

#### ç°¡å˜ãªã‚¢ãƒ©ãƒ¼ãƒˆ
```bash
# 1. ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆåœæ­¢ã®æ¤œçŸ¥
#!/bin/bash
if ! pgrep -f "python3.*universal-agent" > /dev/null; then
    echo "ALERT: Agent stopped at $(date)" | mail -s "Agent Alert" admin@example.com
fi

# 2. ã‚¨ãƒ©ãƒ¼ç‡ã®ç›£è¦–
#!/bin/bash
ERROR_RATE=$(python3 hooks/view-command-logs.py --stats | grep "error_rate" | cut -d: -f2)
if (( $(echo "$ERROR_RATE > 0.1" | bc -l) )); then
    echo "ALERT: High error rate: $ERROR_RATE" | mail -s "High Error Rate" admin@example.com
fi
```

## ğŸ¯ æœ¬ç•ªç’°å¢ƒãƒ‡ãƒ—ãƒ­ã‚¤ãƒ¡ãƒ³ãƒˆ

### 1. æœ¬ç•ªç’°å¢ƒã®æº–å‚™

#### ã‚·ã‚¹ãƒ†ãƒ è¨­å®š
```bash
# 1. ã‚·ã‚¹ãƒ†ãƒ ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä½œæˆ
sudo useradd -m -s /bin/bash claude-agent
sudo usermod -aG docker claude-agent

# 2. ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªæ§‹é€ ã®ä½œæˆ
sudo mkdir -p /opt/claude-code-cluster
sudo chown claude-agent:claude-agent /opt/claude-code-cluster

# 3. ãƒ­ã‚°ãƒ‡ã‚£ãƒ¬ã‚¯ãƒˆãƒªã®è¨­å®š
sudo mkdir -p /var/log/claude-code-cluster
sudo chown claude-agent:claude-agent /var/log/claude-code-cluster
```

#### systemdã‚µãƒ¼ãƒ“ã‚¹ã®è¨­å®š
```bash
# 1. ã‚µãƒ¼ãƒ“ã‚¹ãƒ•ã‚¡ã‚¤ãƒ«ã®ä½œæˆ
sudo cat > /etc/systemd/system/claude-agent-cc01.service << EOF
[Unit]
Description=Claude Code Agent CC01
After=network.target

[Service]
Type=simple
User=claude-agent
WorkingDirectory=/opt/claude-code-cluster
ExecStart=/opt/claude-code-cluster/venv/bin/python3 hooks/universal-agent-auto-loop-with-logging.py CC01 owner repo
Restart=always
RestartSec=10
Environment=PYTHONPATH=/opt/claude-code-cluster

[Install]
WantedBy=multi-user.target
EOF

# 2. ã‚µãƒ¼ãƒ“ã‚¹ã®æœ‰åŠ¹åŒ–
sudo systemctl daemon-reload
sudo systemctl enable claude-agent-cc01
sudo systemctl start claude-agent-cc01
```

### 2. é«˜å¯ç”¨æ€§è¨­å®š

#### è¤‡æ•°ã‚µãƒ¼ãƒãƒ¼ã§ã®ãƒ‡ãƒ—ãƒ­ã‚¤
```bash
# Server 1: CC01, CC02
./hooks/start-agent-loop.sh start CC01 &
./hooks/start-agent-loop.sh start CC02 &

# Server 2: CC03, CC04
./hooks/start-agent-loop.sh start CC03 &
./hooks/start-agent-loop.sh start CC04 &

# Server 3: CC05, Manager
./hooks/start-agent-loop.sh start CC05 &
```

#### è² è·åˆ†æ•£è¨­å®š
```bash
# 1. nginxè¨­å®š
sudo cat > /etc/nginx/sites-available/claude-cluster << EOF
upstream claude_agents {
    server 127.0.0.1:8001;
    server 127.0.0.1:8002;
    server 127.0.0.1:8003;
}

server {
    listen 80;
    location / {
        proxy_pass http://claude_agents;
    }
}
EOF

# 2. è¨­å®šã®æœ‰åŠ¹åŒ–
sudo ln -s /etc/nginx/sites-available/claude-cluster /etc/nginx/sites-enabled/
sudo systemctl reload nginx
```

## ğŸ“š è¿½åŠ ãƒªã‚½ãƒ¼ã‚¹

### 1. ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
- [Quick Start Guide](./scripts/setup-command-logging-test.sh)
- [Command Logging System](./COMMAND_LOGGING_SETUP_GUIDE.md)
- [Agent Sonnet Documentation](./AGENT_SONNET_SYSTEM_DOCUMENTATION.md)

### 2. ã‚µãƒãƒ¼ãƒˆã¨ã‚³ãƒŸãƒ¥ãƒ‹ãƒ†ã‚£
- **GitHub Issues**: https://github.com/ootakazuhiko/claude-code-cluster/issues
- **Discussions**: https://github.com/ootakazuhiko/claude-code-cluster/discussions

### 3. é–‹ç™ºè€…å‘ã‘ãƒªã‚½ãƒ¼ã‚¹
- **API Documentation**: `/docs/api/`
- **Contributing Guide**: `/CONTRIBUTING.md`
- **Development Setup**: `/docs/development/`

## ğŸ”„ ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆæ‰‹é †

### 1. å®šæœŸã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
```bash
# 1. ãƒãƒƒã‚¯ã‚¢ãƒƒãƒ—ã®ä½œæˆ
tar -czf claude-cluster-backup-$(date +%Y%m%d).tar.gz /opt/claude-code-cluster

# 2. æ–°ã—ã„ãƒãƒ¼ã‚¸ãƒ§ãƒ³ã®å–å¾—
cd /opt/claude-code-cluster
git pull origin main

# 3. ä¾å­˜é–¢ä¿‚ã®ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
pip install --upgrade -r requirements.txt

# 4. ã‚µãƒ¼ãƒ“ã‚¹ã®å†èµ·å‹•
sudo systemctl restart claude-agent-cc01
sudo systemctl restart claude-agent-cc02
sudo systemctl restart claude-agent-cc03
```

### 2. ç·Šæ€¥ã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
```bash
# 1. å…¨ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®åœæ­¢
./hooks/start-agent-loop.sh stop all

# 2. é«˜é€Ÿã‚¢ãƒƒãƒ—ãƒ‡ãƒ¼ãƒˆ
git fetch origin main
git reset --hard origin/main

# 3. å³åº§ã®å†èµ·å‹•
./hooks/start-agent-loop.sh start all
```

---

ğŸš€ **ã“ã®ã‚¬ã‚¤ãƒ‰ã«ã‚ˆã‚Šã€claude-code-clusterã®å®Œå…¨ãªå°å…¥ã¨é‹ç”¨ãŒå¯èƒ½ã«ãªã‚Šã¾ã™ã€‚**

ğŸ“§ **ã‚µãƒãƒ¼ãƒˆ**: å•é¡ŒãŒç™ºç”Ÿã—ãŸå ´åˆã¯ã€GitHubã®Issuesã§å ±å‘Šã—ã¦ãã ã•ã„ã€‚

ğŸ”§ **ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚º**: ç‰¹å®šã®ãƒ‹ãƒ¼ã‚ºã«åˆã‚ã›ã¦è¨­å®šã‚’ã‚«ã‚¹ã‚¿ãƒã‚¤ã‚ºã§ãã¾ã™ã€‚

ğŸ¯ **ç›®æ¨™**: é«˜å“è³ªã§åŠ¹ç‡çš„ãªè‡ªå‹•åŒ–ã•ã‚ŒãŸã‚³ãƒ¼ãƒ‰é–‹ç™ºç’°å¢ƒã®å®Ÿç¾